<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Identity Contract Management </title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto:300,700' rel='stylesheet' type='text/css'>
  <script src="./app.js"></script>
</head>

<body onload="App.openTab(event, 'home'); document.getElementsByClassName('tablinks')[0].click()">

  <h2> Identity Contract Management</h2>

  <h3 id="address">Your address is: </h3>

  <br>

  <div class="tab">
    <button class="tablinks" onclick="App.openTab(event, 'home')" onfocus="blur()"> Home</button>
    <button class="tablinks" onclick="App.openTab(event, 'myIdentity'); App.getNewIdentity();" onfocus="blur()"> My Identity</button>
    <button class="tablinks" onclick="App.openTab(event, 'addAttributes'); App.checkIdentity();" onfocus="blur()"> Add Attributes</button>
    <button class="tablinks" onclick="App.openTab(event, 'manageAttributes')" onfocus="blur()"> Manage Attributes</button>
    <button class="tablinks" onclick="App.openTab(event, 'timer')" onfocus="blur()"> Password</button>
    <button class="tablinks" onclick="App.openTab(event, 'admin')" onfocus="blur()" style="display: none"> Admin</button>
    <button class="tablinks" onclick="App.openTab(event, 'ENStab')" onfocus="blur()"> ENS</button>
    <button class="tablinks" onclick="App.openTab(event, 'about')" onfocus="blur()"> How it works?</button>

  </div>

  <div id="home" class="tabcontent">

    <h3>Create your new Identity now!</h3>

    <button id="createIdentity" onclick="App.newIdentity()" onfocus="blur()">Create Identity</button>
    <br><br>
    <span id="homeStatus"></span>

    <h3>Already have an Identity?</h3>

    <button id="ownIdentity" onclick="App.openTab(event, 'myIdentity'); document.getElementsByClassName('tablinks')[1].click()"
      onfocus="blur()">I own an Identity</button>
    <br>

    <h3>Know how to use this DApp!</h3>

    <button id="howWorks" onclick="App.openTab(event, 'myIdentity'); document.getElementsByClassName('tablinks')[7].click()"
      onfocus="blur()">How it Works?</button>
    <br>

    <br><br>

  </div>

  <div id="addAttributes" class="tabcontent">
    <h3>Configure your Identity</h3>

    <span id="addStatus">Your contract address is: </span>
    <br>
    <div id="attribute1">
      <br><label id="parameters" for="receiver">Name:</label><input type="text" id="input1" onblur="App.checkKey('input1', 'addAttributeStatus')"
        onkeyup="App.checkKey('input1', 'addAttributeStatus')" placeholder="e.g., Alberto" disabled>
      <br>
    </div>
    <div id="attribute2" style="display: none;">
      <br><label id="parameters" for="receiver">Lastname:</label><input type="text" id="input2" onblur="App.checkKey('input2', 'addAttributeStatus')"
        onkeyup="App.checkKey('input2', 'addAttributeStatus')" placeholder="e.g., Ballesteros Rodríguez" disabled>
      <br>
    </div>

    <div id="attribute3" style="display: none;">
      <br><label id="parameters" for="receiver">Email:</label><input type="text" id="input3" onblur="App.checkEmail('input3', 'addAttributeStatus')"
        maxlength="63" placeholder="email@domain.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" disabled>
      <br>
    </div>

    <div id="attribute4" style="display: none;">
      <br><label id="parameters" for="receiver">Phone:</label><input type="text" id="input4" onblur="App.checkPhone('input4', 'addAttributeStatus')"
        placeholder="Your mobile phone" pattern="^[0-9\-\+]{6,15}$" disabled>
      <br>
    </div>

    <div id="attribute5" style="display: none;">
      <br><label id="parameters" for="receiver">Date of birth:</label><input type="text" id="input5" onblur="App.checkDate('input5', 'addAttributeStatus')"
        maxlength="10" placeholder="DD/MM/YYYY" pattern="^\d{2}[/]\d{2}[/]\d{4}$" disabled>
      <br>
    </div>

    <div id="attribute6" style="display: none;">
      <br><label id="parameters" for="receiver">Country:</label>
      <select id="input6" name="input6" disabled></select>
      <br>
    </div>

    <div id="attribute7" style="display: none;">
      <br><label id="parameters" for="receiver">Gender:</label>
      <select id="input7" name="input7" disabled>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
      </select>
      <br>
    </div>

    <br><span id="addAttributeStatus"></span>
    <br>
    <br><span id="addedAttribute"></span>

    <h5>If you want to add a new attribute write it and press Add</h5>

    <button id="addAttribute" onfocus="blur()" onclick="App.addAttribute()" disabled>Add attributes</button>
    <br><br>
  </div>

  <div id="manageAttributes" class="tabcontent">
    <h3>Manage Attributes</h3>

    <span id="manageStatus">Your contract address is: </span>

    <h5>Select the attributes that you want to manage.</h5>

    <div id="showAttribute1" style="display: none;">
      <label id="parameters">Name:</label><input type="text" id="show1" onblur="App.checkKey('show1', 'updateStatus')" onkeyup="App.checkKey('show1', 'updateStatus')"
        placeholder="Click 'Show' to see your name" disabled>
      <label class="container">
        <input type="checkbox" id="checkbox1" disabled>
        <span class="checkmark"></span>
      </label>
    </div>


    <div id="showAttribute2" style="display: none;">
      <br><br>
      <label id="parameters">Lastname:</label><input type="text" id="show2" onblur="App.checkKey('show2', 'updateStatus')"
        onkeyup="App.checkKey('show2', 'updateStatus')" placeholder="Click 'Show' to see your lastname" disabled>
      <label class="container">
        <input type="checkbox" id="checkbox2" disabled>
        <span class="checkmark"></span>
      </label>
    </div>

    <div id="showAttribute3" style="display: none;">
      <br><br>
      <label id="parameters">Email:</label><input type="text" id="show3" onblur="App.checkEmail('show3', 'updateStatus')"
        maxlength="63" placeholder="Click 'Show' to see your email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" disabled>
      <label class="container">
        <input type="checkbox" id="checkbox3" disabled>
        <span class="checkmark"></span>
      </label>
    </div>


    <div id="showAttribute4" style="display: none;">
      <br><br>
      <label id="parameters">Phone:</label><input type="text" id="show4" onblur="App.checkPhone('show4', 'updateStatus')"
        placeholder="Click 'Show' to see your Mobile Phone" pattern="^[0-9\-\+]{6,15}$" disabled>
      <label class="container">
        <input type="checkbox" id="checkbox4" disabled>
        <span class="checkmark"></span>
      </label>
    </div>


    <div id="showAttribute5" style="display: none;">
      <br><br>
      <label id="parameters">Date of birth:</label><input type="text" id="show5" onblur="App.checkDate('show5', 'updateStatus')"
        maxlength="10" placeholder="Click 'Show' to see your date of birth" pattern="^\d{2}[/]\d{2}[/]\d{4}$" disabled>
      <label class="container">
        <input type="checkbox" id="checkbox5" disabled>
        <span class="checkmark"></span>
      </label>
    </div>

    <div id="showAttribute6" style="display: none;">
      <br><br>
      <label id="parameters">Country:</label><input type="text" id="show6" ) placeholder="Click 'Show' to see your country"
        disabled>
      <label class="container">
        <input type="checkbox" id="checkbox6" disabled>
        <span class="checkmark"></span>
      </label>
    </div>

    <div id="showAttribute7" style="display: none;">
      <br><br>
      <label id="parameters">Gender:</label><input type="text" id="show7" ) placeholder="Click 'Show' to see your gender"
        disabled>
      <label class="container">
        <input type="checkbox" id="checkbox7" disabled>
        <span class="checkmark"></span>
      </label>
    </div>

    <h5></h5>
    <span id="removeStatus"></span>
    <br>
    <span id="updateStatus"></span>

    <h5>Select the attributes that you want to see and press 'Show All'</h5>
    <button id="showAll" onfocus="blur()" onclick="App.checkboxSelection()">Show All</button>


    <h5>If you want to update an existing attribute select it and press Update</h5>
    <button id="checkboxUpdate" onfocus="blur()" onclick="App.checkboxUpdate()">Select Update</button>
    <button id="updateAttribute" onfocus="blur()" onclick="App.getUpdateAttribute()">Update attributes</button>

    <h5>If you want to remove all your attributes press Remove. This won't delete the Identity. </h5>
    <button id="removeAttribute" onfocus="blur()" onclick="App.removeAllAttributes()">Remove attributes</button>


    <br><br>

  </div>

  <div id="timer" class="tabcontent">
    <h3>Introduce your password to protect your information.</h3>

    <input type="password" id="password" placeholder="Introduce your password" onblur="App.checkPassword('password')">
    <br><br>
    <input type="password" id="verifypassword" placeholder="Confirm your password" onblur="App.checkPassword('verifypassword')">
    <br><br>
    <button id="passwordButton" onfocus="blur()" onclick="App.verifyPassword('password','verifypassword')" disabled>Save
      Password</button>
    <button id="stopPassword" onfocus="blur()" onclick="">Remove Password</button>
    <br><br>

    <span id="passwordStatus"></span>

    <h4 id="instructions">Password requirements:</h4>
    <h4 id="instructions">&emsp;· Contain at least one number</h4>
    <h4 id="instructions">&emsp;· Contain at least one lower case</h4>
    <h4 id="instructions">&emsp;· Contain at least one upper case</h4>
    <h4 id="instructions">&emsp;· Contain at least 10 characters</h4>

  </div>

  <div id="about" class="tabcontent">

    <h3>How to use this DApp</h3>
    <ul>
      <li>The first thing is create a new Identity.</li>
      <li>Once your Identity has been created you must introduce a password in the Password tab.</li>
      <ul>
        <li>This password can be different for each attribute. Expires after 10 minutes or you can expire it manually.</li>
      </ul>
      <li>You can forget your Identity, but must be empty before.</li>
      <hr>
      <li>When you introduce a password, you are able to add new attributes to your Identity, be aware about the messages
        that appear when you are writing. </li>
      <li>After that, you can see, update or remove your attributes.</li>
      <ul>
        <li>Show attribute: Select with the checkbox the attribute or attrubutes that you want to update, then press 'Show
          All' and wait until you can see your attribute in the input box. You need the same password you used for add the
          attributes.
        </li>
        <li>Update attribute: Select with the checkbox the attribute or attributes that you want to update, then press 'Select
          Update', write your new attribute in the input box and finally press 'Update Attributes'. This will create one
          transaction per attribute, you can submit all.
          <li>Remove attributes: This will remove ALL your attributes and clean your Identity. You don't need to use the
            checkbox here.
          </li>
      </ul>
      <hr>
      <li>Etherum Name Service (ENS) - Only for Rinkeby</li>
      <ul>
        <li>You can register a domain using the Ethereum Name Service (ENS). Please follow the steps, be careful with '.test'
          and be aware of the Gas limit showed in MetaMask.
        </li>
        <li>If you don't know if the transaction succeed use the link provided or Metamask.</li>
      </ul>
      <hr>
      <li>Oraclize API - Only for localhost</li>
      <ul>
        <li>The footer show you the price of the Gas in Ether and the ETHUSD price.</li>
        <li>Gas price from: <a href="https://ethgasstation.info/">ETHGasStation</a></li>
        <li>ETHUSD price from: <a href="https://etherscan.io/">etherscan.io</a></li>
      </ul>
    </ul>

    <h3>Thanks for using this DApp!</h3>

    <hr>
    <h3 id="title">Author:&emsp;<a href="mailto:ballesterosbr@protonmail.com">Contact me!</a></h3>
    <h3 id="title">&emsp;Alberto Ballesteros Rodríguez </h3>
    <h3 id="title">Project:&emsp; <a href="https://github.com/ballesterosbr/consensys_devprogram_project">Github repo</a></h3>
    <h3 id="title">&emsp;Decentralized Digital Identity Model</h3>
    <h3 id="title">Consensys Dev Academy 2018</h3>
    <br><br>
  </div>

  <div id="myIdentity" class="tabcontent">

    <h3>Information about your identity</h3>

    <span id="identityStatus"></span>

    <h3>
      <table id="id_info">
        <tr>
          <td>Issuer</td>
          <td></td>
        </tr>
        <tr>
          <td>Contract address</td>
          <td></td>
        </tr>
        <tr>
          <td>Owner</td>
          <td></td>
        </tr>
        <tr>
          <td>Creation date</td>
          <td></td>
        </tr>
      </table>
    </h3>

    <button id="loadIdentity" onclick="App.getNewIdentity()" onfocus="blur()">Show Identity information</button>

    <h3>Forget your identity</h3>

    <h5>Press Forget if you want to forget this smart contract. You will need to create a new Identity.</h5>

    <button id="forgetIdentity" onclick="App.forgetIdentity()" onfocus="blur()">Forget Identity</button>

    <br><br>

    <span id="destroyStatus"></span>

    <br><br>

  </div>

  <div id="admin" class="tabcontent">
    <br>
    <span id="emergencyStatus">Press the button to stop the smart contract!</span>
    <br>
    <button id="emergency" onclick="App.enableEmergency()" onfocus="blur()">Stop contract</button>

  </div>

  <div id="ENStab" class="tabcontent">
    <h3>Too difficult to remember your address? Register your name with ENS!</h3>
    <input id="ENSinput" minlength="7" placeholder="e.g, yourname.test">
    <button id="GetENS" onclick="App.testENS()" onfocus="blur()">Check ENS</button>
    <br><br>

    <span id="ENSStatus"></span>

    <h5>I - Register a domain for you (Do not include '.test' now)</h5>
    <input id="ENSinput_1" minlength="7" placeholder="e.g, yourname" onkeyup="App.checkENS('ENSinput_1')">
    <br><br>
    <button id="ensButton_1" onclick="App.registerENS()" onfocus="blur()">Register</button>

    <h5>II - Save your name in the ENS Public Registry (Include '.test' now)</h5>
    <input id="ENSinput_2" minlength="7" placeholder="e.g, yourname.test">
    <br><br>
    <button id="ensButton_2" onclick="App.saveENS()" onfocus="blur()">Save</button>

    <h5>III - Link your account with your domain (Include '.test' now)</h5>
    <input id="ENSinput_3" minlength="7" placeholder="e.g, yourname.test">
    <br><br>
    <button id="ensButton_3" onclick="App.linkENS()" onfocus="blur()">Link</button>

    <br><br>

  </div>

</body>
<footer>
  <br><br>
  <div id="oraclizeDiv">
    <span id="oraclizeStatus"></span>
    <span id="oraclizePrice">
      <pre></pre></span><span id="oraclizeGas"></span>
    <label>Information from ETHGasStation and etherscan.io provided by Oraclize API </label>

  </div>
  <br>
</footer>

<script>
  App.selectCountries('input6');
</script>

</html>